---
title: 重绘重排
tags: CSS
---

浏览器打开页面，在页面生成的时候，至少需要一次初始化渲染,也就是至少发生一次`重绘`和`重排`，用户访问页面的过程中还会不断的触发`重绘`和`重排`。

不管是发生了`重绘`还是`重排`,都会影响性能，最可怕的是`重排`，它会让部分甚至整个渲染树重新分析，让元素的尺寸计算，重新排列元素。

`重绘`的代价要小一些，表现为元素的外观被改变，比如文字颜色，背景颜色等。

> 重排一定会导致重绘，重绘不一定出现重排

<!-- more -->

那到底重排什么时候会触发呢？

- 添加或删除可见的 DOM元素
- 元素位置改变
- 元素尺寸改变，`边距`、`边框`、`宽高`等
- 元素内容改变， 文本改变或者图片大小改变
- 页面初始化渲染
- 修改浏览器窗口尺寸

那我们可以优化重排，减少重绘重排的次数

1. 浏览器自动就会有一个维护的队列，把会引起重绘重排的操作放入1队列中，等队列中的操作到一定数量或者到一定的时间间隔，就会自动处理

 	2. 集中的修改样式，比如设置类名，这样可以尽可能利用浏览器优化机制，一次重绘重排就完成渲染
 	3. 利用 `transform` 实现动画效果，不需要进行布局绘制和样式计算等操作，不会影响到其他盒子，只触发自己的重绘
 	4. 使用文档碎片， `createDocumentFragment` 操作的节点是在内存里处理，并不会更新页面，等处理完成在创建到页面，`Vue`的渲染就是使用的文档碎片